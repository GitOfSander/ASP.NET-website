/*!
 *
 * jQuery collagePlus Plugin v0.3.3
 * https://github.com/ed-lea/jquery-collagePlus
 *
 * Copyright 2012, Ed Lea twitter.com/ed_lea
 *
 * built for http://qiip.me
 *
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 *
 */
(function(n){n.fn.collagePlus=function(t){function i(t,i,u,f){for(var h,c=u.padding*(t.length-1)+t.length*t[0][3],w=u.albumWidth-c,v=w/(i-c),l=c,y=i<u.albumWidth?!0:!1,e=0;e<t.length;e++){var o=n(t[e][0]),s=Math.floor(t[e][1]*v),a=Math.floor(t[e][2]*v),p=!!(e<t.length-1);u.allowPartialLastRow===!0&&y===!0&&(s=t[e][1],a=t[e][2]);l+=s;!p&&l<u.albumWidth&&(s=u.allowPartialLastRow===!0&&y===!0?s:s+(u.albumWidth-l));s--;h=o.is("img")?o:o.find("img");h.width(s);o.is("img")||o.width(s+t[e][3]);h.height(a);o.is("img")||o.height(a+t[e][4]);r(o,p,u);h.one("load",function(n){return function(){var t;u.effect=="default"?n.animate({opacity:"1"},{duration:u.fadeSpeed}):(t=u.direction=="vertical"?f<=10?f:10:e<=9?e+1:10,n.removeClass(function(n,t){return(t.match(/\beffect-\S+/g)||[]).join(" ")}),n.addClass(u.effect),n.addClass("effect-duration-"+t))}}(o)).each(function(){this.complete&&n(this).trigger("load")})}}function r(n,t,i){var r={"margin-bottom":i.padding+"px","margin-right":t?i.padding+"px":"0px",display:i.display,"vertical-align":"bottom",overflow:"hidden"};return n.css(r)}function u(t){$img=n(t);var i=[];return i.w=parseFloat($img.css("border-left-width"))+parseFloat($img.css("border-right-width")),i.h=parseFloat($img.css("border-top-width"))+parseFloat($img.css("border-bottom-width")),i}return this.each(function(){var e=0,f=[],o=1,s=n(this),r;n.fn.collagePlus.defaults.albumWidth=s.width();n.fn.collagePlus.defaults.padding=parseFloat(s.css("padding-left"));n.fn.collagePlus.defaults.images=s.children();r=n.extend({},n.fn.collagePlus.defaults,t);r.images.each(function(t){var l=n(this),s=l.is("img")?l:n(this).find("img"),a=typeof s.data("width")!="undefined"?s.data("width"):s.width(),v=typeof s.data("height")!="undefined"?s.data("height"):s.height(),h=u(s),c,y;s.data("width",a);s.data("height",v);c=Math.ceil(a/v*r.targetHeight);y=Math.ceil(r.targetHeight);f.push([this,c,y,h.w,h.h]);e+=c+h.w+r.padding;e>r.albumWidth&&f.length!=0&&(i(f,e-r.padding,r,o),delete e,delete f,e=0,f=[],o+=1);r.images.length-1==t&&f.length!=0&&(i(f,e,r,o),delete e,delete f,e=0,f=[],o+=1)})})};n.fn.collagePlus.defaults={targetHeight:400,fadeSpeed:"fast",display:"inline-block",effect:"default",direction:"vertical",allowPartialLastRow:!1}})(jQuery),function(n){n.fn.removeWhitespace=function(){return this.contents().filter(function(){return this.nodeType==3&&!/\S/.test(this.nodeValue)}).remove(),this}}(jQuery);
/*!
 *
 * jQuery collageCaption Plugin v0.1.1
 * extra for collagePlus plugin
 * https://github.com/ed-lea/jquery-collagePlus
 *
 * Copyright 2012, Ed Lea twitter.com/ed_lea
 *
 * built for http://qiip.me
 *
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 *
 */
(function(n){n.fn.collageCaption=function(t){var r={images:n(this).children(),background:"black",opacity:"0.5",speed:100,cssClass:"Caption"},i=n.extend({},r,t);return this.each(function(){return i.images.each(function(){var t=n(this),f;if(typeof t.data("caption")!="undefined"){f='<div class="'+i.cssClass+'" style="position:relative;"><div class="Caption_Background" style="background-color:'+i.background+";opacity:"+i.opacity+';position:relative;top:0;"><\/div><div class="Caption_Content" style="position:relative;">'+t.data("caption")+"<\/div><\/div>";t.append(f);var r=t.find("."+i.cssClass),e=t.find(".Caption_Background"),o=t.find(".Caption_Content"),u=r.height();e.height(u);o.css("top","-"+u+"px");t.bind({mouseenter:function(){r.animate({top:-1*u},{duration:i.speed,queue:!1})},mouseleave:function(){r.animate({top:0},{duration:i.speed,queue:!1})}})}}),this})}})(jQuery);